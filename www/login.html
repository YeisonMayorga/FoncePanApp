<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Iniciar sesión</title>
  <link rel="shortcut icon" href="./img/LOGO.png" type="image/x-icon"> 
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="css/login.css" />
</head>
<body class="d-flex justify-content-center align-items-center vh-100 bg-light">

  <!-- Modal de Error de Conexión -->
  <div class="modal fade" id="errorConnectionModal" tabindex="-1" aria-labelledby="errorConnectionModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header border-0 bg-danger text-white">
          <h5 class="modal-title" id="errorConnectionModalLabel">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>Falla Técnica
          </h5>
        </div>
        <div class="modal-body text-center py-4">
          <i class="bi bi-wifi-off display-1 text-danger mb-3"></i>
          <h5 class="mb-3">Error de Conexión</h5>
          <p class="text-muted mb-0">No se pudo establecer conexión con el servidor. Por favor, verifica tu conexión a internet e intenta más tarde.</p>
        </div>
        <div class="modal-footer border-0 justify-content-center">
          <button type="button" class="btn btn-primary" id="retryConnectionBtn">
            <i class="bi bi-arrow-clockwise me-2"></i>Reintentar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="card shadow-lg p-4 login-card" style="width: 100%; max-width: 400px;">

    <!-- Indicador de Estado de Conexión -->
    <div class="connection-status mb-3" id="connectionStatus">
      <div class="d-flex align-items-center justify-content-center">
        <span class="spinner-border spinner-border-sm text-primary me-2" role="status" id="connectionSpinner"></span>
        <small class="text-muted" id="connectionText">Verificando conexión...</small>
      </div>
    </div>

    <div class="text-center mb-2 py-3">
      <img src="img/LOGO.png" alt="Icono" class="logo-animation" max-width="%90" height="100">
      <h4 class="mb-3 fade-in-delay">Bienvenido</h4>
    </div>

    <div class="fade-in-delay-2">
      <select id="usuario-guardado" class="form-select mb-3">
        <option value="">Selecciona un usuario guardado</option>
      </select>

      <div class="mb-3">
        <label for="email" class="form-label">
          <i class="bi bi-envelope-fill me-2"></i>Correo
        </label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-envelope"></i></span>
          <input type="email" class="form-control" id="email" placeholder="correo@ejemplo.com" autocomplete="email" />
          <span class="input-group-text validation-icon" id="email-icon"></span>
        </div>
        <small class="text-muted validation-message" id="email-message"></small>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">
          <i class="bi bi-lock-fill me-2"></i>Contraseña
        </label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-lock"></i></span>
          <input type="password" class="form-control" id="password" placeholder="••••••••" autocomplete="current-password" />
          <button type="button" class="input-group-text btn-toggle-password" id="toggle-password">
            <i class="bi bi-eye"></i>
          </button>
        </div>
        <small class="text-muted validation-message" id="password-message"></small>
      </div>

      <div class="form-check mb-3">
        <input type="checkbox" id="recordar" class="form-check-input">
        <label for="recordar" class="form-check-label">Recordar sesión</label>
      </div>
      
      <div class="d-grid gap-2">
        <button id="login-btn" class="btn btn-primary btn-login">
          <span class="btn-text">Iniciar sesión</span>
          <span class="btn-loader d-none">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Iniciando sesión...
          </span>
        </button>
      </div>
      
      <div id="error-msg" class="error-message mt-3"></div>
      
      <span class="d-inline-block text-end bg-opacity-10 p-2 rounded version-text">
        Versión: 2.8.2
      </span>
    </div>

  </div>

  <script src="cordova.js"></script>
  <script src="js/cordova-update.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="js/login.js"></script>

</body>
</html>